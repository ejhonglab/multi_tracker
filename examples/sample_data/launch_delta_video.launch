<launch>
<param name="use_sim_time" type="bool" value="true" />

<arg name="path" default="/media/remy/storage/tracking_data/20170711_150010_N1" />
# TODO infer
<arg name="file" default="20170711_150010_N1_delta_video.bag" />
<node name="set_original_basename" pkg="multi_tracker" type="set_original_basename.py" args="$(arg path)/$(arg file)" />

# TODO wrap the player so i dont need to explicitly specify bag file name (only one per directory)
# see http://answers.ros.org/question/244960/shell-bash-used-in-a-roslaunchsolved/
<node name="rosbag_player" pkg="rosbag" type="play" output="screen" args="$(arg path)/$(arg file) --clock --pause --rate=2 --start=0" >
  # TODO this won't currently play video recorded on multi_tracker/delta_video.
  # fix so that it does. check for both?
  <remap from="multi_tracker/1/delta_video" to="original_delta_video" />
</node>

# TODO make camera/image_raw the default / changeable via remapping?
# likewise with input topic? (this is what all the other nodes do)
<node name="delta_video_player" pkg="multi_tracker" type="delta_video_player.py" args="--in='original_delta_video' --out='camera/image_raw' --directory=$(arg path)" />
<node name="image_viewer" pkg="image_view" type="image_view" args="image:=camera/image_raw" />

# TODO call set_exp_basename_and_path with directory (and retracking_original_timestamp somehow)
# so it is actually the same (and not a few seconds after)

# TODO copy the original parameters and retracking parameters to output directory, so all information
# relavant to current data is in one place

</launch>
